(this.webpackJsonpvjam=this.webpackJsonpvjam||[]).push([[0],{123:function(e,t,n){e.exports=n.p+"static/media/bonecrack.c37d9ccf.wav"},124:function(e,t,n){e.exports=n.p+"static/media/footsteps.3497fc94.wav"},125:function(e,t,n){e.exports=n.p+"static/media/windandchimes.4a6e1b51.wav"},126:function(e,t,n){e.exports=n.p+"static/media/fireworks.23af77c2.wav"},127:function(e,t,n){e.exports=n.p+"static/media/Roland-GR-1-Steel-Drum-C4.777ed87c.wav"},141:function(e,t,n){e.exports=n(249)},146:function(e,t,n){},154:function(e,t){},156:function(e,t){},241:function(e,t){},242:function(e,t){},249:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(7),u=n.n(c),i=(n(146),n(12)),o=n(6),l=n(66),s=n(38),m=n(13),f=n(15),p=n(281),v=n(286),d=n(8),b=n.n(d);function y(){var e=Object(i.a)(["\n  margin-top: 92px;\n  text-align: center;\n"]);return y=function(){return e},e}function E(){var e=Object(i.a)(["\n  p {\n    margin-top: 24px;\n    margin-bottom: 24px;\n  }\n"]);return E=function(){return e},e}function O(){var e=Object(i.a)([""]);return O=function(){return e},e}function j(){var e=Object(i.a)(["\n  max-width: 768px;\n  margin: auto;\n  margin-top: 100px;\n"]);return j=function(){return e},e}var g=m.a.div(j()),h=m.a.section(O()),x=m.a.section(E()),S=m.a.div(y()),w=function(){var e=Object(a.useState)(function(e){for(var t="",n="abcdefghijklmnopqrstuvwxyz0123456789",a=n.length,r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*a));return t}(4)),t=Object(f.a)(e,2),n=t[0],c=t[1],u=Object(s.f)();return r.a.createElement(g,null,r.a.createElement(h,null,"Welcome to vjam,",r.a.createElement("br",null),"a virtual jam session for everyone."),r.a.createElement(x,null,r.a.createElement("p",null,"Please enter a valid room id provided by your jam session partners. You can also open a new one by using any random id, which is hopefully not yet taken - good luck."),r.a.createElement(S,null,r.a.createElement(v.a,{value:n,onChange:function(e){return c(e.target.value)}}),r.a.createElement(p.a,{onClick:function(){"running"!==b.a.context.state&&b.a.context.resume(),u.push("rooms/".concat(n))}},"enter"))))},k=(n(285),n(282)),R=n(122),N=n.n(R).a.connect("wss://try:try@broker.shiftr.io"),P=n(19),T="TRIGGERATTACK",M="TRIGGERRELEASE",D="SETUSER",C={JUNO:"JUNO",RHODES:"RHODES",MPC:"MPC",STEELDRUM:"STEELDRUM"},J={instruments:{JUNO:{user:"",note:null,velocity:0},RHODES:{user:"",note:null,velocity:0},MPC:{user:"",note:null,velocity:0},STEELDRUM:{user:"",note:null,velocity:0}}},A=function(e){return function(t){return t.band.instruments[e].note}},I=function(e){return function(t){return t.band.instruments[e].velocity}},U=function(e){return function(t){return t.band.instruments[e].user}};function F(){var e=Object(i.a)(["\n  width: 100%;\n  height: 100%;\n  background-color: lightskyblue;\n"]);return F=function(){return e},e}m.a.div(F());function G(){var e=Object(i.a)(["\n  width: 100%;\n  background-color: lightyellow;\n"]);return G=function(){return e},e}function W(){var e=Object(i.a)(["\n  height: 200px;\n  width: 100%;\n  ","\n"]);return W=function(){return e},e}m.a.div(W(),(function(e){return e.active&&"\n    border: solid darkgreen 3px;\n  "})),m.a.div(G());var _=function(e){var t=e.type;e.user,e.children,e.inputPad,e.prefix,Object(o.c)((function(e){return e.system.name})),Object(o.c)((function(e){return e.band.instruments}))[t]},L=function(e){var t=e.type,n=e.prefix,c=Object(a.useState)(!1),u=Object(f.a)(c,2),i=u[0],l=u[1],s=Object(a.useState)(null),m=Object(f.a)(s,2),p=m[0],v=m[1],b=Object(o.c)(A(t)),y=Object(o.c)(I(t)),E=Object(o.c)(U(t));return Object(a.useEffect)((function(){if(!i){var e=new d.Synth({oscillator:{type:"sine"},envelope:{attack:.05,decay:.1,sustain:.3,release:1}},[i,p,b,y]),t=new d.Freeverb(.4,1e3),n=new d.PingPongDelay({delayTime:"8n",feedback:.4,wet:.5});e.connect(d.Master),n.connect(t),t.connect(d.Master),v(e),l(!0)}p&&(b?p.triggerAttack(b,0,y):p.triggerRelease())}),[i,p,b,y]),r.a.createElement(_,{type:t,user:E,inputPad:!0,prefix:n})},H=function(e){var t=e.type,n=e.prefix,c=Object(a.useState)(!1),u=Object(f.a)(c,2),i=u[0],l=u[1],s=Object(a.useState)(null),m=Object(f.a)(s,2),p=m[0],v=m[1],b=Object(o.c)(A(t)),y=Object(o.c)(I(t)),E=Object(o.c)(U(t));return Object(a.useEffect)((function(){if(!i){var e=new d.Synth({frequency:200,envelope:{attack:.001,decay:1.4,release:.2},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1.5}),t=new d.Freeverb(.4,1e3),n=new d.PingPongDelay({delayTime:"8n",feedback:.4,wet:.5});e.connect(d.Master),n.connect(t),t.connect(d.Master),v(e),l(!0)}p&&(b?p.triggerAttack(b,0,y):p.triggerRelease())}),[i,p,b,y]),r.a.createElement(_,{type:t,user:E,inputPad:!0,prefix:n})},K=n(123),q=n.n(K),B=n(124),X=n.n(B),z=n(125),V=n.n(z),Y=n(126),$=n.n(Y),Q=function(e){var t=e.type,n=e.prefix,c=Object(a.useState)(!1),u=Object(f.a)(c,2),i=u[0],l=u[1],s=Object(a.useState)(null),m=Object(f.a)(s,2),p=m[0],v=m[1],b=Object(o.c)(A(t)),y=Object(o.c)(U(t));return Object(a.useEffect)((function(){if(!i){var e=new d.Sampler({C3:q.a,F3:X.a,C4:V.a,F4:$.a});e.volume.value=-6;var t=new d.Freeverb(.6,5e3),n=new d.PingPongDelay({delayTime:"32n",feedback:.7,wet:.25});e.connect(n),n.connect(t),t.connect(d.Master),v(e),l(!0)}p&&(b?p.triggerAttack(b):p.triggerRelease())}),[p,b,i]),r.a.createElement(_,{type:t,user:y,inputPad:!0,prefix:n})},Z=function(e){var t=e.prefix,n=e.type,c=e.samples,u=Object(a.useState)(!1),i=Object(f.a)(u,2),l=i[0],s=i[1],m=Object(a.useState)(null),p=Object(f.a)(m,2),v=p[0],b=p[1],y=Object(o.c)(A(n)),E=Object(o.c)(U(n));return Object(a.useEffect)((function(){if(!l){var e=new d.Sampler(c);e.volume.value=-6;var t=new d.Freeverb(.6,5e3),n=new d.PingPongDelay({delayTime:"32n",feedback:.7,wet:.25});e.volume.value=-24,e.connect(n),n.connect(t),t.connect(d.Master),b(e),s(!0)}v&&(y?v.triggerAttack(y):v.triggerRelease())}),[l,v,y,c]),r.a.createElement(_,{type:n,user:E,inputPad:!0,prefix:t})},ee=n(72),te="ADDUSER",ne="SETUSERS",ae="SETNAME",re={name:"",users:[]};function ce(){var e=Object(i.a)(["\n  background-color: lightpink;\n  padding: 25px;\n  list-style-type: none;\n  li {\n    display: inline-block;\n    margin-right: 15px;\n  }\n"]);return ce=function(){return e},e}var ue=m.a.ul(ce()),ie=function(){var e=Object(o.c)((function(e){return e.system.users})),t=Object(o.c)((function(e){return e.system.name}));return r.a.createElement(ue,null,e.map((function(e,n){return r.a.createElement("li",{key:n},e!==t&&r.a.createElement("span",null,e),e===t&&r.a.createElement("b",null,e))})))},oe="ADDMESSAGE",le={messages:[]};function se(){var e=Object(i.a)(["\n  height: 100px;\n  overflow-y: scroll;\n"]);return se=function(){return e},e}function me(){var e=Object(i.a)(["\n  background-color: lightcoral;\n  padding: 25px;\n"]);return me=function(){return e},e}var fe=m.a.div(me()),pe=m.a.ul(se()),ve=function(e){var t=e.prefix,n=Object(a.useState)(""),c=Object(f.a)(n,2),u=c[0],i=c[1],l=Object(o.c)((function(e){return e.chat.messages})),s=Object(o.c)((function(e){return e.system.name}));return r.a.createElement(fe,null,r.a.createElement(v.a,{fullWidth:!0,value:u,placeholder:"something nice you wanna say to your friends",onChange:function(e){return i(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(N.publish(t,JSON.stringify(function(e,t){return{type:oe,payload:{message:{sender:e,text:t}}}}(s,u))),i(""))}}),r.a.createElement(pe,null,l.map((function(e,t){return r.a.createElement("li",{key:t},e.sender," > ",e.text)}))))},de=n(280),be=n(287),ye=n(283),Ee=n(288);function Oe(){var e=Object(i.a)(["\n  width: 100%;\n  margin-top: 25px;\n  margin-bottom: 25px;\n"]);return Oe=function(){return e},e}var je=m.a.div(Oe()),ge=function(e){var t,n=e.prefix,a=Object(o.c)((function(e){return e.system.name})),c=Object(o.c)((t=a,function(e){var n="NONE";return Object.keys(e.band.instruments).forEach((function(a){e.band.instruments[a].user===t&&(n=a)})),n}));return r.a.createElement(je,null,r.a.createElement(k.a,{container:!0},r.a.createElement(k.a,{item:!0,xs:4},r.a.createElement(de.a,{fullWidth:!0},r.a.createElement(be.a,null,"Pick an instrument"),r.a.createElement(ye.a,{value:c,onChange:function(e){N.publish(n,JSON.stringify(function(e,t){return{type:D,payload:{instrument:e,user:t}}}(e.target.value,a)))},fullWidth:!0},r.a.createElement(Ee.a,{value:"NONE"},"none"),";",Object.keys(C).map((function(e,t){return r.a.createElement(Ee.a,{value:C[e],key:t},C[e])})))))))},he=n(36),xe=Object(he.c)({system:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ne:return Object(P.a)({},e,{users:t.payload.value});case te:var n=Object(ee.a)(e.users);return n.includes(t.payload.value)||n.push(t.payload.value),Object(P.a)({},e,{users:n});case ae:return e.users.includes(t.payload.value)?e:Object(P.a)({},e,{name:t.payload.value});default:return e}},band:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:var n=Object(P.a)({},e);return n.instruments[t.payload.instrument].note=t.payload.note,n.instruments[t.payload.instrument].velocity=t.payload.velocity,Object(P.a)({},n);case M:var a=Object(P.a)({},e);return a.instruments[t.payload.instrument].note=null,a.instruments[t.payload.instrument].velocity=0,Object(P.a)({},a);case D:var r=Object(P.a)({},e);return Object.keys(r.instruments).forEach((function(e){r.instruments[e].user===t.payload.user&&(r.instruments[e].user="")})),"NONE"!==t.payload.instrument&&(r.instruments[t.payload.instrument].user=t.payload.user),Object(P.a)({},r);default:return e}},chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe:var n=Object(ee.a)(e.messages);return n.unshift(t.payload.message),n=n.splice(0,100),Object(P.a)({},e,{messages:n});default:return e}}}),Se=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||he.d,we=Object(he.e)((function(e,t){return"RESET"===t.type?xe(void 0,t):"SETSTATE"===t.type?xe(t.payload,{type:"IGNORE"}):xe(e,t)}),Se(Object(he.a)()));we.dispatch({type:"INIT"});var ke=we,Re=n(127);function Ne(){var e=Object(i.a)(["\n  margin-top: 128px;\n"]);return Ne=function(){return e},e}var Pe={C4:n.n(Re).a},Te=m.a.div(Ne()),Me=function(){var e=Object(s.g)().id,t=Object(a.useState)(!1),n=Object(f.a)(t,2),c=n[0],u=n[1],i=Object(a.useState)(""),l=Object(f.a)(i,2),m=l[0],p=l[1],d=Object(o.c)((function(e){return e.system.name})),b=Object(o.b)();return Object(a.useEffect)((function(){e&&!c&&(N.subscribe("vjam/".concat(e),(function(t){t||console.log("subscribed to vjam/".concat(e))})),N.subscribe("vjam/".concat(e,"/users/#"),(function(t){t||console.log("subscribed to vjam/".concat(e,"/users/#"))})),N.on("message",(function(t,n){var a;if(t==="vjam/".concat(e))try{a=JSON.parse(n.toString()),ke.dispatch(a)}catch(c){}t==="vjam/".concat(e,"/users/get")&&(JSON.parse(n.toString()).id!==N.options.clientId&&N.publish("vjam/".concat(e,"/users/set"),JSON.stringify(ke.getState().system.users)));if(t==="vjam/".concat(e,"/users/set")){var r=JSON.parse(n.toString());ke.dispatch({type:ne,payload:{value:r}})}})),u(!0),N.publish("vjam/".concat(e,"/users/get"),JSON.stringify({id:N.options.clientId})))}),[e,c]),r.a.createElement(r.a.Fragment,null,""===d&&r.a.createElement(Te,null,r.a.createElement(k.a,{container:!0},r.a.createElement(k.a,{item:!0,xs:2,sm:3}),r.a.createElement(k.a,{item:!0,xs:8,sm:6},"Please let the others know your name. If it is not yet taken, then you will automatically enter the jam session. Submit by pressing return."),r.a.createElement(k.a,{item:!0,xs:2,sm:3}),r.a.createElement(k.a,{item:!0,xs:2,sm:3}),r.a.createElement(k.a,{item:!0,xs:8,sm:6},r.a.createElement(v.a,{fullWidth:!0,value:m,onChange:function(e){p(e.target.value)},onKeyPress:function(t){"Enter"===t.key&&(N.publish("vjam/".concat(e),JSON.stringify({type:te,payload:{value:m}})),b(function(e){return{type:ae,payload:{value:e}}}(m)))}})))),""!==d&&r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{container:!0},r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(ie,null)),r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(ve,{prefix:"vjam/".concat(e)}))),r.a.createElement("h2",null,"Instruments"),r.a.createElement("p",null,"Instrumentes are controlled via the 2d pad, where the x axis is mapped to the pitch and the y axis to the velocity. Sound design and interaction design will hopefully follow soon."),r.a.createElement(ge,{prefix:"vjam/".concat(e)}),r.a.createElement(k.a,{container:!0,spacing:3,justify:"flex-start"},r.a.createElement(L,{type:C.JUNO,prefix:"vjam/".concat(e)}),r.a.createElement(H,{type:C.RHODES,prefix:"vjam/".concat(e)}),r.a.createElement(Q,{type:C.MPC,prefix:"vjam/".concat(e)}),r.a.createElement(Z,{type:C.STEELDRUM,samples:Pe,prefix:"vjam/".concat(e)}))))};function De(){var e=Object(i.a)(["\n  margin-left: 15px;\n  margin-right: 15px;\n"]);return De=function(){return e},e}var Ce=m.a.div(De());var Je=function(){return r.a.createElement(Ce,null,r.a.createElement(o.a,{store:ke},r.a.createElement(l.a,null,r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/rooms/:id"},r.a.createElement(Me,null)),r.a.createElement(s.a,{path:"/"},r.a.createElement(w,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Je,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[141,1,2]]]);
//# sourceMappingURL=main.70225ceb.chunk.js.map